DEFINE_ACTION_FUNCTION test BEGIN

// go through the spells, get a list of all referenced resources
// (run on IWD side)

      LAF read_in_list STR_VAR file=iwd_arcane.2da location=data  RET list END
      OUTER_WHILE "%list%" STRING_COMPARE "" BEGIN
         LAF return_first_entry STR_VAR list RET entry list END

      END








END

DEFINE_PATCH_FUNCTION CRE_log_spell_resource
   INT_VAR offset_secondary=0
   STR_VAR filename=""
BEGIN
   SET offset=offset_secondary + 0x14
   READ_ASCII offset resource
   LPF log_this STR_VAR file="spells_called.txt" input="%resource% by %filename%" repeat="no" END
END